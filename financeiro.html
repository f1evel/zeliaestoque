<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Zélia - Financeiro</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="app-container">
  <aside class="sidebar">
    <div class="logo">
      <img src="img/logo-zelia.png" alt="Logo Zélia" />
    </div>
    <nav>
      <ul>
        <li><a href="dashboard.html">🏠 Dashboard</a></li>
        <li><a href="produtos.html">📦 Produtos</a></li>
        <li><a href="movimentacoes.html">🔁 Movimentações</a></li>
        <li><a class="ativo" href="financeiro.html">💰 Financeiro</a></li>
        <li><a href="relatorios.html">📊 Relatórios</a></li>
      </ul>
    </nav>
    <button onclick="logout()">Sair</button>
  </aside>

  <main class="main-content">
    <h1>💰 Financeiro</h1>

    <div class="filtros">
      <label>De:</label>
      <input type="date" id="fin-data-inicio">
      <label>Até:</label>
      <input type="date" id="fin-data-fim">

      <input type="text" id="fin-compra-id" placeholder="CompraID" list="lista-compra-fin" style="width:140px;">
      <datalist id="lista-compra-fin"></datalist>
      <select id="fin-fornecedor"></select>
      <select id="fin-forma"></select>
      <select id="fin-status"></select>

      <button id="botao-atualizar-fin">🔄 Atualizar</button>
      <button id="botao-limpar-fin">🧹 Limpar</button>
      <button id="botao-exportar-csv-fin">📄 CSV</button>
      <button id="botao-exportar-excel-fin">📊 Excel</button>
    </div>

    <div id="cards-financeiro" class="cards">
      <div class="card"><strong>A pagar:</strong> <span id="total-pagar">-</span></div>
      <div class="card"><strong>Pagos:</strong> <span id="total-pagos">-</span></div>
      <div class="card"><strong>Recebidos:</strong> <span id="total-recebidos">-</span></div>
    </div>

    <div id="tabela-financeiro"></div>

    <div id="modal-parcelas" class="modal">
      <div class="modal-content">
        <h3>Parcelas - Compra <span id="modal-compra-id"></span></h3>
        <div id="parcelas-detalhes"></div>
        <div style="margin-top:10px; text-align:right;">
          <button onclick="fecharModalParcelas()">Fechar</button>
        </div>
      </div>
    </div>
    <div id="fundo-modal-parcelas" class="fundo-modal"></div>
  </main>
</div>

<div id="spinner" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.2); align-items:center; justify-content:center; z-index:2000;">
  <div style="border:6px solid #ccc; border-top:6px solid #009688; border-radius:50%; width:40px; height:40px; animation:girar 1s linear infinite;"></div>
</div>
<style>
@keyframes girar {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>

<script type="module" src="js/firebaseConfig.js"></script>
<script type="module" src="js/utils.js"></script>
<script type="module" src="js/modais.js"></script>
<script type="module" src="js/relatorios/financeiro.js"></script>
<script type="module" src="js/relatorios/financeiroExportar.js"></script>
<script type="module" src="js/relatorios/financeiroGraficos.js"></script>
<script type="module" src="js/relatorios/financeiroTotais.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
